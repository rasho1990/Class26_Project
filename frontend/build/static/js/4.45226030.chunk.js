(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[4],{43:function(e,t,a){"use strict";var n=a(0),r=a.n(n);a(48);t.a=function(e){var t=e.className,a=e.style,n=e.children;return r.a.createElement("div",{className:"card ".concat(t),style:a},n)}},44:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=a(45);function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function c(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){Object(n.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}},45:function(e,t,a){"use strict";function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}a.d(t,"a",(function(){return n}))},46:function(e,t,a){"use strict";a.d(t,"c",(function(){return n})),a.d(t,"b",(function(){return r})),a.d(t,"a",(function(){return c})),a.d(t,"d",(function(){return i}));var n=function(){return{type:"REQUIRE"}},r=function(e){return{type:"MINLENGTH",val:e}},c=function(){return{type:"EMAIL"}},i=function(e,t){var a=!0,n=!0,r=!1,c=void 0;try{for(var i,l=t[Symbol.iterator]();!(n=(i=l.next()).done);n=!0){var u=i.value;"REQUIRE"===u.type&&(a=a&&e.trim().length>0),"MINLENGTH"===u.type&&(a=a&&e.trim().length>=u.val),"MAXLENGTH"===u.type&&(a=a&&e.trim().length<=u.val),"MIN"===u.type&&(a=a&&+e>=u.val),"MAX"===u.type&&(a=a&&+e<=u.val),"EMAIL"===u.type&&(a=a&&/^\S+@\S+\.\S+$/.test(e))}}catch(s){r=!0,c=s}finally{try{n||null==l.return||l.return()}finally{if(r)throw c}}return a}},48:function(e,t,a){},51:function(e,t,a){"use strict";var n=a(10),r=a(45),c=a(44),i=a(0),l=function(e,t){switch(t.type){case"SET_FORM_DATA":return Object(c.a)({},e,{inputs:Object(c.a)({},t.inputs),isValid:t.isValid});case"INPUT_CHANGE":var a=!0;for(var n in e.inputs)e.inputs[n]&&(a=n===t.inputId?a&&t.isValid:a&&e.inputs[n].isValid);return Object(c.a)({},e,{inputs:Object(c.a)({},e.inputs,Object(r.a)({},t.inputId,{value:t.value,isValid:t.isValid})),isValid:a});default:return e}};t.a=function(e,t){var a={inputs:e,isValid:t},r=Object(i.useReducer)(l,a),c=Object(n.a)(r,2),u=c[0],s=c[1];return[u,Object(i.useCallback)((function(e,t,a){s({type:"INPUT_CHANGE",inputId:e,value:t,isValid:a})}),[]),Object(i.useCallback)((function(e,t){s({type:"SET_FORM_DATA",inputs:e,isValid:t})}),[])]}},52:function(e,t,a){"use strict";var n=a(10),r=a(44),c=a(0),i=a.n(c),l=a(46),u=(a(53),function(e,t){switch(t.type){case"CHANGE":return Object(r.a)({},e,{value:t.value,isValid:Object(l.d)(t.value,t.validators)});case"TOUCH":return Object(r.a)({},e,{isTouched:!0});default:return e}});t.a=function(e){var t=e.element,a=e.label,r=e.id,l=e.type,s=e.placeholder,o=e.rows,d=e.errorText,p=e.validators,f=e.onInputChange,v={value:e.initValue||"",isValid:e.initIsValid||!1,isTouched:!1},b=Object(c.useReducer)(u,v),m=Object(n.a)(b,2),O=m[0],j=m[1],h=function(e){j({type:"CHANGE",value:e.target.value,validators:p})},E=function(){j({type:"TOUCH"})};Object(c.useEffect)((function(){f(r,O.value,O.isValid)}),[r,f,O.value,O.isValid]);var y="input"===t?i.a.createElement("input",{id:r,type:l,placeholder:s,onBlur:E,onChange:h,value:O.value}):i.a.createElement("textarea",{id:r,rows:o||3,onBlur:E,onChange:h,value:O.value});return i.a.createElement("div",{className:"form-control ".concat(!O.isValid&&O.isTouched&&"form-control--invalid")},i.a.createElement("label",{htmlFor:r},a),y,!O.isValid&&O.isTouched&&i.a.createElement("p",null,d))}},53:function(e,t,a){},54:function(e,t,a){"use strict";var n=a(10),r=a(0),c=a.n(r),i=a(42);a(55);t.a=function(e){var t=e.id,a=e.centered,l=e.onInputChange,u=Object(r.useRef)(),s=Object(r.useState)(),o=Object(n.a)(s,2),d=o[0],p=o[1],f=Object(r.useState)(""),v=Object(n.a)(f,2),b=v[0],m=v[1],O=Object(r.useState)(!1),j=Object(n.a)(O,2),h=j[0],E=j[1];return Object(r.useEffect)((function(){if(d){var e=new FileReader;e.onload=function(){m(e.result)},e.readAsDataURL(d)}}),[d]),c.a.createElement("div",{className:"form-control"},c.a.createElement("input",{id:t,ref:u,style:{display:"none"},type:"file",accept:".jpg,.png,.jpeg",onChange:function(e){var a,n=h;e.target.files&&1===e.target.files.length?(a=e.target.files[0],p(a),E(!0),n=!0):(E(!1),n=!1),l(t,a,n)}}),c.a.createElement("div",{className:"image-upload ".concat(a&&"center")},c.a.createElement("div",{className:"image-upload__preview"},b?c.a.createElement("img",{src:b,alt:"Preview Image"}):"Please upload an image!"),c.a.createElement(i.a,{type:"button",onClick:function(){u.current.click()}},"UPLOAD IMAGE")))}},55:function(e,t,a){},56:function(e,t,a){"use strict";var n=a(0),r=a.n(n),c=a(52),i=a(54),l=a(42),u=a(46);a(57);t.a=function(e){var t=e.isAdd,a=e.formState,n=e.inputHandler,s=e.formHandler;return r.a.createElement("form",{className:"place-form",onSubmit:s},t&&r.a.createElement(i.a,{id:"image",centered:!0,onInputChange:n}),r.a.createElement(c.a,{id:"title",element:"input",type:"text",label:"Title",value:a.inputs.title.value,errorText:"Please enter a valid title!",validators:[Object(u.c)()],onInputChange:n}),t&&r.a.createElement(c.a,{id:"address",element:"input",type:"text",label:"Address",value:a.inputs.address.value,errorText:"Please enter a valid address!",validators:[Object(u.c)()],onInputChange:n}),r.a.createElement(c.a,{id:"description",element:"textarea",label:"Description",value:a.inputs.description.value,errorText:"Please enter a valid description (at least 5 characters)!",validators:[Object(u.c)(),Object(u.b)(5)],onInputChange:n}),r.a.createElement(l.a,{type:"submit",disabled:!a.isValid},t?"Add":"Edit"," place"))}},57:function(e,t,a){},70:function(e,t,a){"use strict";a.r(t);var n=a(47),r=a.n(n),c=a(10),i=a(0),l=a.n(i),u=a(8),s=a(11),o=a(43),d=a(15),p=a(50),f=a(56),v=a(51),b=a(49);t.default=function(){var e=Object(i.useContext)(s.a),t=e.userId,a=e.token,n=Object(u.h)().placeId,m=Object(u.g)().push,O=Object(b.a)(),j=O.isLoading,h=O.error,E=O.clearError,y=O.sendRequest,g=Object(i.useState)({}),C=Object(c.a)(g,2),I=C[0],N=C[1],T=Object(v.a)({title:{value:"",isValid:!0},description:{value:"",isValid:!0}},!1),V=Object(c.a)(T,3),A=V[0],w=V[1],P=V[2];Object(i.useEffect)((function(){!function(){var e,t,c;r.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return e="/api/places/".concat(n),t={url:e,method:"GET",headers:{Authorization:"Bearer ".concat(a)}},i.prev=2,i.next=5,r.a.awrap(y(t.url,t.method,null,t.headers));case 5:c=i.sent,N(c),P({title:{value:c.title,isValid:!0},description:{value:c.description,isValid:!0}},!0),i.next=13;break;case 10:i.prev=10,i.t0=i.catch(2),console.log("Could fetch place!",i.t0);case 13:case"end":return i.stop()}}),null,null,[[2,10]])}()}),[y,n,P]);return j?l.a.createElement("div",{className:"center"},"Loading..."):j?l.a.createElement("div",{className:"center"},l.a.createElement(d.a,null)):I||h?l.a.createElement(i.Fragment,null,l.a.createElement(p.a,{error:h,onClear:E}),!j&&I&&l.a.createElement(f.a,{formState:A,inputHandler:w,formHandler:function(e){var c,i,l,u,s,o,d;return r.a.async((function(p){for(;;)switch(p.prev=p.next){case 0:return e.preventDefault(),c=A.inputs,i=c.title,l=c.description,u="/api/places/".concat(n),s={title:i.value,description:l.value},o={"Content-Type":"application/json",Authorization:"Bearer ".concat(a)},d={method:"PATCH",body:JSON.stringify(s),headers:o},p.prev=6,p.next=9,r.a.awrap(y(u,d.method,d.body,d.headers));case 9:p.sent,m("/".concat(t,"/places")),p.next=16;break;case 13:p.prev=13,p.t0=p.catch(6),console.log("Could not edit place!",p.t0);case 16:case"end":return p.stop()}}),null,null,[[6,13]])},isAdd:!1})):l.a.createElement("div",{className:"center"},l.a.createElement(o.a,null,l.a.createElement("h2",null,"Could not find place!")))}}}]);
//# sourceMappingURL=4.45226030.chunk.js.map