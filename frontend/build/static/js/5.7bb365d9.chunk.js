(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[5],{43:function(e,t,a){"use strict";var n=a(0),r=a.n(n);a(48);t.a=function(e){var t=e.className,a=e.style,n=e.children;return r.a.createElement("div",{className:"card ".concat(t),style:a},n)}},44:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a(45);function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){Object(n.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}},45:function(e,t,a){"use strict";function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}a.d(t,"a",(function(){return n}))},46:function(e,t,a){"use strict";a.d(t,"c",(function(){return n})),a.d(t,"b",(function(){return r})),a.d(t,"a",(function(){return i})),a.d(t,"d",(function(){return l}));var n=function(){return{type:"REQUIRE"}},r=function(e){return{type:"MINLENGTH",val:e}},i=function(){return{type:"EMAIL"}},l=function(e,t){var a=!0,n=!0,r=!1,i=void 0;try{for(var l,u=t[Symbol.iterator]();!(n=(l=u.next()).done);n=!0){var c=l.value;"REQUIRE"===c.type&&(a=a&&e.trim().length>0),"MINLENGTH"===c.type&&(a=a&&e.trim().length>=c.val),"MAXLENGTH"===c.type&&(a=a&&e.trim().length<=c.val),"MIN"===c.type&&(a=a&&+e>=c.val),"MAX"===c.type&&(a=a&&+e<=c.val),"EMAIL"===c.type&&(a=a&&/^\S+@\S+\.\S+$/.test(e))}}catch(s){r=!0,i=s}finally{try{n||null==u.return||u.return()}finally{if(r)throw i}}return a}},48:function(e,t,a){},51:function(e,t,a){"use strict";var n=a(10),r=a(45),i=a(44),l=a(0),u=function(e,t){switch(t.type){case"SET_FORM_DATA":return Object(i.a)({},e,{inputs:Object(i.a)({},t.inputs),isValid:t.isValid});case"INPUT_CHANGE":var a=!0;for(var n in e.inputs)e.inputs[n]&&(a=n===t.inputId?a&&t.isValid:a&&e.inputs[n].isValid);return Object(i.a)({},e,{inputs:Object(i.a)({},e.inputs,Object(r.a)({},t.inputId,{value:t.value,isValid:t.isValid})),isValid:a});default:return e}};t.a=function(e,t){var a={inputs:e,isValid:t},r=Object(l.useReducer)(u,a),i=Object(n.a)(r,2),c=i[0],s=i[1];return[c,Object(l.useCallback)((function(e,t,a){s({type:"INPUT_CHANGE",inputId:e,value:t,isValid:a})}),[]),Object(l.useCallback)((function(e,t){s({type:"SET_FORM_DATA",inputs:e,isValid:t})}),[])]}},52:function(e,t,a){"use strict";var n=a(10),r=a(44),i=a(0),l=a.n(i),u=a(46),c=(a(53),function(e,t){switch(t.type){case"CHANGE":return Object(r.a)({},e,{value:t.value,isValid:Object(u.d)(t.value,t.validators)});case"TOUCH":return Object(r.a)({},e,{isTouched:!0});default:return e}});t.a=function(e){var t=e.element,a=e.label,r=e.id,u=e.type,s=e.placeholder,o=e.rows,d=e.errorText,p=e.validators,m=e.onInputChange,f={value:e.initValue||"",isValid:e.initIsValid||!1,isTouched:!1},v=Object(i.useReducer)(c,f),b=Object(n.a)(v,2),O=b[0],g=b[1],h=function(e){g({type:"CHANGE",value:e.target.value,validators:p})},j=function(){g({type:"TOUCH"})};Object(i.useEffect)((function(){m(r,O.value,O.isValid)}),[r,m,O.value,O.isValid]);var y="input"===t?l.a.createElement("input",{id:r,type:u,placeholder:s,onBlur:j,onChange:h,value:O.value}):l.a.createElement("textarea",{id:r,rows:o||3,onBlur:j,onChange:h,value:O.value});return l.a.createElement("div",{className:"form-control ".concat(!O.isValid&&O.isTouched&&"form-control--invalid")},l.a.createElement("label",{htmlFor:r},a),y,!O.isValid&&O.isTouched&&l.a.createElement("p",null,d))}},53:function(e,t,a){},54:function(e,t,a){"use strict";var n=a(10),r=a(0),i=a.n(r),l=a(42);a(55);t.a=function(e){var t=e.id,a=e.centered,u=e.onInputChange,c=Object(r.useRef)(),s=Object(r.useState)(),o=Object(n.a)(s,2),d=o[0],p=o[1],m=Object(r.useState)(""),f=Object(n.a)(m,2),v=f[0],b=f[1],O=Object(r.useState)(!1),g=Object(n.a)(O,2),h=g[0],j=g[1];return Object(r.useEffect)((function(){if(d){var e=new FileReader;e.onload=function(){b(e.result)},e.readAsDataURL(d)}}),[d]),i.a.createElement("div",{className:"form-control"},i.a.createElement("input",{id:t,ref:c,style:{display:"none"},type:"file",accept:".jpg,.png,.jpeg",onChange:function(e){var a,n=h;e.target.files&&1===e.target.files.length?(a=e.target.files[0],p(a),j(!0),n=!0):(j(!1),n=!1),u(t,a,n)}}),i.a.createElement("div",{className:"image-upload ".concat(a&&"center")},i.a.createElement("div",{className:"image-upload__preview"},v?i.a.createElement("img",{src:v,alt:"Preview Image"}):"Please upload an image!"),i.a.createElement(l.a,{type:"button",onClick:function(){c.current.click()}},"UPLOAD IMAGE")))}},55:function(e,t,a){},65:function(e,t,a){},73:function(e,t,a){"use strict";a.r(t);var n=a(44),r=a(47),i=a.n(r),l=a(10),u=a(0),c=a.n(u),s=a(51),o=a(49),d=a(11),p=a(43),m=a(46),f=a(52),v=a(42),b=a(54),O=(a(65),function(e){var t=e.isLoginMode,a=e.formState,n=e.inputHandler,r=e.authSubmitHandler;return c.a.createElement("form",{onSubmit:r},!t&&c.a.createElement(f.a,{element:"input",id:"name",type:"text",placeholder:"Your Name",label:"Your Name",errorText:"Your name is required!",validators:[Object(m.c)()],onInputChange:n}),c.a.createElement(f.a,{id:"email",element:"input",type:"email",placeholder:"Your Email",label:"Email",errorText:"Please enter a valid email!",validators:[Object(m.c)(),Object(m.a)()],onInputChange:n}),c.a.createElement(f.a,{id:"password",element:"input",type:"password",placeholder:"Your Password",label:"Password",errorText:"Please enter a valid password, at least 5 characters!",validators:[Object(m.c)(),Object(m.b)(5)],onInputChange:n}),!t&&c.a.createElement(b.a,{id:"image",centered:"true",onInputChange:n}),c.a.createElement(v.a,{type:"submit",disabled:!a.isValid},t?"Login":"Signup"))}),g=a(15),h=a(50);t.default=function(){var e=Object(u.useContext)(d.a),t=(e.isLoggedIn,e.login),a=(e.userId,Object(s.a)({email:{value:"",isValid:!1},password:{value:"",isValid:!1}},!1)),r=Object(l.a)(a,3),m=r[0],f=r[1],b=r[2],j=Object(u.useState)(!0),y=Object(l.a)(j,2),E=y[0],w=y[1],I=Object(o.a)(),V=I.isLoading,N=I.error,T=I.clearError,C=I.sendRequest;return c.a.createElement(u.Fragment,null,c.a.createElement(h.a,{error:N,onClear:T}),c.a.createElement(p.a,{className:"authentication"},V&&c.a.createElement(g.a,{asOverlay:!0}),c.a.createElement("h2",null,"Authentication Required!"),c.a.createElement("hr",null),c.a.createElement(O,{formState:m,inputHandler:f,authSubmitHandler:function(e){var a,n,r,l,u,c,s,o,d,p,f;return i.a.async((function(v){for(;;)switch(v.prev=v.next){case 0:if(e.preventDefault(),a=m.inputs,n=a.name,r=a.email,l=a.password,u=a.image,!E){v.next=18;break}return"/api/users/login",c={email:r.value,password:l.value},s={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)},v.prev=6,v.next=9,i.a.awrap(C("/api/users/login",s.method,s.body,s.headers));case 9:o=v.sent,t(o.userId,o.token),v.next=16;break;case 13:v.prev=13,v.t0=v.catch(6),console.log("Error at login!",v.t0);case 16:v.next=35;break;case 18:return"/api/users/signup",(d=new FormData).append("name",n.value),d.append("email",r.value),d.append("password",l.value),d.append("image",u.value),p={method:"POST",headers:{},body:d},v.prev=25,v.next=28,i.a.awrap(C("/api/users/signup",p.method,p.body,p.headers));case 28:f=v.sent,t(f.userId,f.token),v.next=35;break;case 32:v.prev=32,v.t1=v.catch(25),console.log("Error at signup!",v.t1);case 35:case"end":return v.stop()}}),null,null,[[6,13],[25,32]])},isLoginMode:E}),c.a.createElement(v.a,{inverse:!0,onClick:function(){E?b(Object(n.a)({},m.inputs,{name:{value:"",isValid:!1},image:{value:null,isValid:!1}}),!1):b(Object(n.a)({},m.inputs,{name:void 0,image:void 0}),m.inputs.email.isValid&&m.inputs.password.isValid),w((function(e){return!e}))}},"SWITCH TO ",E?"SIGNUP":"LOGIN")))}}}]);
//# sourceMappingURL=5.7bb365d9.chunk.js.map