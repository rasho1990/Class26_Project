(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[6],{44:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a(45);function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){Object(n.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}},45:function(e,t,a){"use strict";function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}a.d(t,"a",(function(){return n}))},46:function(e,t,a){"use strict";a.d(t,"c",(function(){return n})),a.d(t,"b",(function(){return r})),a.d(t,"a",(function(){return i})),a.d(t,"d",(function(){return c}));var n=function(){return{type:"REQUIRE"}},r=function(e){return{type:"MINLENGTH",val:e}},i=function(){return{type:"EMAIL"}},c=function(e,t){var a=!0,n=!0,r=!1,i=void 0;try{for(var c,l=t[Symbol.iterator]();!(n=(c=l.next()).done);n=!0){var u=c.value;"REQUIRE"===u.type&&(a=a&&e.trim().length>0),"MINLENGTH"===u.type&&(a=a&&e.trim().length>=u.val),"MAXLENGTH"===u.type&&(a=a&&e.trim().length<=u.val),"MIN"===u.type&&(a=a&&+e>=u.val),"MAX"===u.type&&(a=a&&+e<=u.val),"EMAIL"===u.type&&(a=a&&/^\S+@\S+\.\S+$/.test(e))}}catch(s){r=!0,i=s}finally{try{n||null==l.return||l.return()}finally{if(r)throw i}}return a}},51:function(e,t,a){"use strict";var n=a(10),r=a(45),i=a(44),c=a(0),l=function(e,t){switch(t.type){case"SET_FORM_DATA":return Object(i.a)({},e,{inputs:Object(i.a)({},t.inputs),isValid:t.isValid});case"INPUT_CHANGE":var a=!0;for(var n in e.inputs)e.inputs[n]&&(a=n===t.inputId?a&&t.isValid:a&&e.inputs[n].isValid);return Object(i.a)({},e,{inputs:Object(i.a)({},e.inputs,Object(r.a)({},t.inputId,{value:t.value,isValid:t.isValid})),isValid:a});default:return e}};t.a=function(e,t){var a={inputs:e,isValid:t},r=Object(c.useReducer)(l,a),i=Object(n.a)(r,2),u=i[0],s=i[1];return[u,Object(c.useCallback)((function(e,t,a){s({type:"INPUT_CHANGE",inputId:e,value:t,isValid:a})}),[]),Object(c.useCallback)((function(e,t){s({type:"SET_FORM_DATA",inputs:e,isValid:t})}),[])]}},52:function(e,t,a){"use strict";var n=a(10),r=a(44),i=a(0),c=a.n(i),l=a(46),u=(a(53),function(e,t){switch(t.type){case"CHANGE":return Object(r.a)({},e,{value:t.value,isValid:Object(l.d)(t.value,t.validators)});case"TOUCH":return Object(r.a)({},e,{isTouched:!0});default:return e}});t.a=function(e){var t=e.element,a=e.label,r=e.id,l=e.type,s=e.placeholder,o=e.rows,d=e.errorText,p=e.validators,f=e.onInputChange,v={value:e.initValue||"",isValid:e.initIsValid||!1,isTouched:!1},b=Object(i.useReducer)(u,v),m=Object(n.a)(b,2),O=m[0],j=m[1],y=function(e){j({type:"CHANGE",value:e.target.value,validators:p})},E=function(){j({type:"TOUCH"})};Object(i.useEffect)((function(){f(r,O.value,O.isValid)}),[r,f,O.value,O.isValid]);var g="input"===t?c.a.createElement("input",{id:r,type:l,placeholder:s,onBlur:E,onChange:y,value:O.value}):c.a.createElement("textarea",{id:r,rows:o||3,onBlur:E,onChange:y,value:O.value});return c.a.createElement("div",{className:"form-control ".concat(!O.isValid&&O.isTouched&&"form-control--invalid")},c.a.createElement("label",{htmlFor:r},a),g,!O.isValid&&O.isTouched&&c.a.createElement("p",null,d))}},53:function(e,t,a){},54:function(e,t,a){"use strict";var n=a(10),r=a(0),i=a.n(r),c=a(42);a(55);t.a=function(e){var t=e.id,a=e.centered,l=e.onInputChange,u=Object(r.useRef)(),s=Object(r.useState)(),o=Object(n.a)(s,2),d=o[0],p=o[1],f=Object(r.useState)(""),v=Object(n.a)(f,2),b=v[0],m=v[1],O=Object(r.useState)(!1),j=Object(n.a)(O,2),y=j[0],E=j[1];return Object(r.useEffect)((function(){if(d){var e=new FileReader;e.onload=function(){m(e.result)},e.readAsDataURL(d)}}),[d]),i.a.createElement("div",{className:"form-control"},i.a.createElement("input",{id:t,ref:u,style:{display:"none"},type:"file",accept:".jpg,.png,.jpeg",onChange:function(e){var a,n=y;e.target.files&&1===e.target.files.length?(a=e.target.files[0],p(a),E(!0),n=!0):(E(!1),n=!1),l(t,a,n)}}),i.a.createElement("div",{className:"image-upload ".concat(a&&"center")},i.a.createElement("div",{className:"image-upload__preview"},b?i.a.createElement("img",{src:b,alt:"Preview Image"}):"Please upload an image!"),i.a.createElement(c.a,{type:"button",onClick:function(){u.current.click()}},"UPLOAD IMAGE")))}},55:function(e,t,a){},56:function(e,t,a){"use strict";var n=a(0),r=a.n(n),i=a(52),c=a(54),l=a(42),u=a(46);a(57);t.a=function(e){var t=e.isAdd,a=e.formState,n=e.inputHandler,s=e.formHandler;return r.a.createElement("form",{className:"place-form",onSubmit:s},t&&r.a.createElement(c.a,{id:"image",centered:!0,onInputChange:n}),r.a.createElement(i.a,{id:"title",element:"input",type:"text",label:"Title",value:a.inputs.title.value,errorText:"Please enter a valid title!",validators:[Object(u.c)()],onInputChange:n}),t&&r.a.createElement(i.a,{id:"address",element:"input",type:"text",label:"Address",value:a.inputs.address.value,errorText:"Please enter a valid address!",validators:[Object(u.c)()],onInputChange:n}),r.a.createElement(i.a,{id:"description",element:"textarea",label:"Description",value:a.inputs.description.value,errorText:"Please enter a valid description (at least 5 characters)!",validators:[Object(u.c)(),Object(u.b)(5)],onInputChange:n}),r.a.createElement(l.a,{type:"submit",disabled:!a.isValid},t?"Add":"Edit"," place"))}},57:function(e,t,a){},69:function(e,t,a){"use strict";a.r(t);var n=a(47),r=a.n(n),i=a(10),c=a(0),l=a.n(c),u=a(8),s=a(11),o=a(56),d=a(50),p=a(15),f=a(51),v=a(49);t.default=function(){var e=Object(f.a)({title:{value:"",isValid:!1},description:{value:"",isValid:!1},address:{value:"",isValid:!1},image:{value:null,isValid:!1}},!1),t=Object(i.a)(e,3),a=t[0],n=t[1],b=(t[2],Object(v.a)()),m=b.isLoading,O=b.error,j=b.clearError,y=b.sendRequest,E=Object(c.useContext)(s.a).token,g=Object(u.g)().push;return l.a.createElement(c.Fragment,null,l.a.createElement(d.a,{error:O,onClear:j}),m&&l.a.createElement(p.a,{asOverlay:!0}),l.a.createElement(o.a,{formState:a,inputHandler:n,formHandler:function(e){var t,n,i;return r.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return e.preventDefault(),t=new FormData,n=a.inputs,"/api/places",t.append("title",n.title.value),t.append("description",n.description.value),t.append("address",n.address.value),t.append("image",n.image.value),i={method:"POST",body:t,headers:{Authorization:"Bearer ".concat(E)}},c.prev=9,c.next=12,r.a.awrap(y("/api/places",i.method,i.body,i.headers));case 12:c.sent,g("/"),c.next=19;break;case 16:c.prev=16,c.t0=c.catch(9),console.log("Error at creating place!",c.t0);case 19:case"end":return c.stop()}}),null,null,[[9,16]])},isAdd:!0}))}}}]);
//# sourceMappingURL=6.a0b625a3.chunk.js.map